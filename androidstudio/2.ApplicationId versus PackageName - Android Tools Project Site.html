<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/276742; Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="900"/>

<div>
<span><div style="position:relative;"><div dir="ltr">All Android apps have a package name. The package name uniquely identifies the app on the device; it is also unique in the Google Play store. This means that once you have published an app with this package name, <b>you can never change it</b>; doing so would cause your app to be treated as a brand new app, and existing users of your app will not see the newly packaged app as an update.<div><div></div></div><div>Prior to the Android Gradle build system, the package name for your app was determined by the package attribute at the root element of your manifest file:</div><div><div><div></div></div><div>AndroidManifest.xml:</div><div></div></div><div style="background-color:rgb(239, 239, 239);border-top-width:1px;border-bottom-width:1px;border-top-style:solid;border-bottom-style:solid;border-top-color:rgb(211, 211, 211);border-bottom-color:rgb(211, 211, 211);padding-top:6.66667px;padding-bottom:6.66667px;line-height:13.3333px;"><div><div><code style="color:rgb(0, 96, 0);">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</code></div><div><code style="color:rgb(0, 96, 0);">&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</code></div><div><code style="color:rgb(0, 96, 0);">    </code><b><code style="color:rgb(0, 96, 0);">package=&quot;com.example.my.app&quot;</code></b></div><div><code style="color:rgb(0, 96, 0);">    android:versionCode=&quot;1&quot;</code></div><div><code style="color:rgb(0, 96, 0);">    android:versionName=&quot;1.0&quot; &gt;</code></div></div><div></div></div><div><div></div></div><div>However, the package defined here also serves a secondary purpose: it is used to name the package for your R resource class (as well as to resolve any relative class names to Activities). In the above example, the generated R class will be <code style="color:rgb(0, 96, 0);">com.example.my.app.R</code>, so if you have code in other packages that need to reference resources, it needs to import <span style="line-height:21.3333px;font-size:13.3333px;">com.example.my.app.R</span><span style="line-height:21.3333px;font-size:13.3333px;">.</span></div><div><div></div></div>With the new Android Gradle build system, you can easily build multiple different <b>versions</b> of your app; for example, you can build both a &quot;free&quot; version and a &quot;pro&quot; version of your app (using flavors), and these should have different packages in the Google Play store such that they can be installed and purchased separately, both installed at the same time, and so on. Similarly, you may also build both &quot;debug&quot; and &quot;alpha&quot; and &quot;beta&quot; versions of your app (using build types) and these can also similarly contribute to unique package names.<div><div></div></div><div>At the same time, the R class you are importing in your code must stay the same at all time; your .java source files should not have to change when you are building the different versions of your app.</div><div><div></div></div><div>Therefore, we have <b>decoupled</b> the two usages of package name:</div><div><ul style="margin-block-start:;margin-block-end:;-moz-padding-start:;"><li style="list-style-type:square;">The final package that is used in your built .apk's manifest, and is the package your app is known as on your device and in the Google Play store, is the &quot;application id&quot;.</li><li style="list-style-type:square;">The package that is used in your source code to refer to your R class, and to resolve any relative activity/service registrations, continues to be called the &quot;package&quot;.</li></ul><div>You can specify the application id in your gradle file as follows:</div><div><div></div></div><div>app/build.gradle:</div><div><div></div></div><div style="background-color:rgb(239, 239, 239);border-top-width:1px;border-bottom-width:1px;border-top-style:solid;border-bottom-style:solid;border-top-color:rgb(211, 211, 211);border-bottom-color:rgb(211, 211, 211);padding-top:6.66667px;padding-bottom:6.66667px;line-height:13.3333px;"><div><div><code style="color:rgb(0, 96, 0);">apply plugin: 'com.android.application'</code></div><div><div></div></div><div><code style="color:rgb(0, 96, 0);">android {</code></div><div><code style="color:rgb(0, 96, 0);">    compileSdkVersion 19</code></div><div><code style="color:rgb(0, 96, 0);">    buildToolsVersion &quot;19.1&quot;</code></div><div><div></div></div><div><code style="color:rgb(0, 96, 0);">    defaultConfig {</code></div><div><code style="color:rgb(0, 96, 0);">        </code><b><code style="color:rgb(0, 96, 0);">applicationId &quot;com.example.my.app&quot;</code></b></div><div><code style="color:rgb(0, 96, 0);">        minSdkVersion 15</code></div><div><code style="color:rgb(0, 96, 0);">        targetSdkVersion 19</code></div><div><code style="color:rgb(0, 96, 0);">        versionCode 1</code></div><div><code style="color:rgb(0, 96, 0);">        versionName &quot;1.0&quot;</code></div><div><code style="color:rgb(0, 96, 0);">    }</code></div></div><div><code style="color:rgb(0, 96, 0);">    ...</code></div><div></div></div><div></div><div>As before, you need to specify the package used for your code in the Manifest file, just as shown in the above AndroidManifest.xml sample.</div><div><div></div></div><div><b>Here comes the critical part: </b><span style="line-height:21.3333px;font-size:13.3333px;">When you've done the above, the two packages are independent. You are completely free to refactor your code - changing the internal package used for your activities and services, updating your Manifest package, and refactoring your import statements. This will have no bearing on the final id of your application, which is now always going to be the applicationId specified in the Gradle file.</span></div><div><span style="line-height:21.3333px;font-size:13.3333px;"><div></div></span></div><div><span style="line-height:21.3333px;font-size:13.3333px;">You can vary the applicationId of your app for flavors and build types by using the following Gradle DSL methods:</span></div><div><span style="line-height:21.3333px;font-size:13.3333px;"><div></div></span></div><div><span style="line-height:21.3333px;font-size:13.3333px;">app/build.gradle:</span></div><div><span><div></div></span></div><div style="background-color:rgb(239, 239, 239);border-top-width:1px;border-bottom-width:1px;border-top-style:solid;border-bottom-style:solid;border-top-color:rgb(211, 211, 211);border-bottom-color:rgb(211, 211, 211);padding-top:6.66667px;padding-bottom:6.66667px;line-height:13.3333px;"><div><span><div><code style="color:rgb(0, 96, 0);">    productFlavors {</code></div><div><code style="color:rgb(0, 96, 0);">        pro {</code></div><div><span style="line-height:21.3333px;font-size:13.3333px;"><code style="color:rgb(0, 96, 0);">            </code><b><code style="color:rgb(0, 96, 0);">applicationId = &quot;com.example.my.pkg.pro&quot;</code></b></span></div><div><code style="color:rgb(0, 96, 0);">        }</code></div><div><code style="color:rgb(0, 96, 0);">        free {</code></div><div><span style="line-height:21.3333px;font-size:13.3333px;"><code style="color:rgb(0, 96, 0);">            </code><b><code style="color:rgb(0, 96, 0);">applicationId = &quot;</code></b></span><b><span style="line-height:21.3333px;font-size:13.3333px;"><code style="color:rgb(0, 96, 0);">com.example.my.pkg</code></span><span style="line-height:21.3333px;font-size:13.3333px;"><code style="color:rgb(0, 96, 0);">.free&quot;</code></span></b></div><div><code style="color:rgb(0, 96, 0);">        }</code></div><div><code style="color:rgb(0, 96, 0);">    }</code></div><div><div></div></div><div><div><code style="color:rgb(0, 96, 0);">    buildTypes {</code></div><div><code style="color:rgb(0, 96, 0);">        debug {</code></div><div><code style="color:rgb(0, 96, 0);">            </code><b><code style="color:rgb(0, 96, 0);">applicationIdSuffix &quot;.debug&quot;</code></b></div><div><span style="line-height:21.3333px;font-size:13.3333px;"><code style="color:rgb(0, 96, 0);">        }</code></span></div></div></span></div><div><span style="line-height:21.3333px;font-size:13.3333px;"><code style="color:rgb(0, 96, 0);">    }</code></span></div><div><span style="line-height:21.3333px;font-size:13.3333px;"><code style="color:rgb(0, 96, 0);">    ....</code></span></div><div></div></div><span style="line-height:21.3333px;font-size:13.3333px;"><div><span style="line-height:21.3333px;font-size:13.3333px;"><div></div></span></div>(In Android Studio you can configure all of this graphically as well in the Project Structure dialog.)</span></div><div><span style="line-height:21.3333px;font-size:13.3333px;"><div></div></span></div><div>NOTE: For compatibility reasons, if you have <b>not</b> defined an applicationId in your build.gradle file, the applicationId will default to the same value as the one specified in the AndroidManifest.xml. In that case, the two are obviously not decoupled, and attempting to refactor your code can accidentally change the id of your application as well! In Android Studio, newly created projects always specify both.</div><div><div></div></div><div>NOTE 2: The package name must always be specified in the default AndroidManifest.xml file. If you have multiple manifests (e.g. a flavor specific manifest or a buildType specific manifest), the package name is optional, but if it is specified it must be identical to the package specified d in the main manifest.</div></div></div></span>
</div></body></html> 